tisefka %>%
anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
tisefka <- tisefka[,c("date","pop")]
tisefka%>%anomalize::time_decompose() %>%
anomalize::anomalize(remainder)
anomaly_detection_yiwen <- function(tisefka = NULL){
target_variable <- colnames(tisefka)[tisefka!="date"]
tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
if ("Yes" %in% tisefka_tazedgant$anomaly) {
Anomalies <- sapply(1:nrow(tisefka_tazedgant), function(x) base::ifelse(tisefka_tazedgant$anomaly[x] == "Yes", tisefka_tazedgant$observed[x], NA))
tisefka <- tisefka %>% dplyr::mutate(Anomalies = Anomalies)
}
return(tisefka)
}
tisefka
target_variable <- colnames(tisefka)[tisefka!="date"]
colnames(tisefka)[colnames(tisefka)!="date"]
target_variable <- colnames(tisefka)[colnames(tisefka)!="date"]
tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
if ("Yes" %in% tisefka_tazedgant$anomaly) {
Anomalies <- sapply(1:nrow(tisefka_tazedgant), function(x) base::ifelse(tisefka_tazedgant$anomaly[x] == "Yes", tisefka_tazedgant$observed[x], NA))
tisefka <- tisefka %>% dplyr::mutate(Anomalies = Anomalies)
}
target_variable
Anomalies
anomaly_detection_yiwen <- function(tisefka = NULL){
target_variable <- colnames(tisefka)[colnames(tisefka)!="date"]
tisefka <- tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
if ("Yes" %in% tisefka_tazedgant$anomaly) {
Anomalies <- sapply(1:nrow(tisefka_tazedgant), function(x) base::ifelse(tisefka_tazedgant$anomaly[x] == "Yes", tisefka_tazedgant$observed[x], NA))
tisefka <- tisefka %>% dplyr::mutate(Anomalies = Anomalies)
}
return(tisefka)
}
tisefka
tisefka
tisefka_tazedgant <- tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
tisefka_tazedgant
"Yes" %in% tisefka_tazedgant$anomaly
Anomalies <- purrr::map(.x = 1:nrow(tisefka_tazedgant), ~ base::ifelse(tisefka_tazedgant$anomaly[.x] == "Yes", tisefka_tazedgant$observed[.x], NA))
Anomalies
purrr::imap(.x = 1:nrow(tisefka_tazedgant), ~ base::ifelse(tisefka_tazedgant$anomaly[.x] == "Yes", tisefka_tazedgant$observed[.x], NA))
?purrr::imap
imap_chr(sample(10), ~ paste0(.y, ": ", .x))
tisefka %>% dplyr::mutate(Anomalies = Anomalies)
as.numeric(Anomalies)
dplyr::mutate(Anomalies = as.numeric(Anomalies))
tisefka %>% dplyr::mutate(Anomalies = as.numeric(Anomalies))
anomaly_detection_yiwen <- function(tisefka = NULL){
target_variable <- colnames(tisefka)[colnames(tisefka)!="date"]
tisefka_tazedgant <- tisefka%>%anomalize::time_decompose(!!target_variable) %>%
anomalize::anomalize(remainder)
if ("Yes" %in% tisefka_tazedgant$anomaly) {
Anomalies <- purrr::imap(.x = 1:nrow(tisefka_tazedgant), ~ base::ifelse(tisefka_tazedgant$anomaly[.x] == "Yes", tisefka_tazedgant$observed[.x], NA))
tisefka <- tisefka %>% dplyr::mutate(Anomalies = as.numeric(Anomalies))
}
return(tisefka)
}
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
tisefka
tisefka <- economics
tisefka[,target_ts] <- purrr::map_df(.x= tisefka[,target_ts],.f = interp_na_value, mode = "spline")
target_ts <- c("date",target_ts)
tisefka <- tisefka[,target_ts]
tisefka
target_ts
target_ts<-colnames(economics)[-1]
target_ts <- c("date",target_ts)
tisefka <- tisefka[,target_ts]
tisefka[,target_ts] <- purrr::map_df(.x= tisefka[,target_ts],.f = interp_na_value, mode = "spline")
target_ts <- c("date",target_ts)
tisefka <- tisefka[,target_ts]
tisefka<-economics
tisefka[,target_ts] <- purrr::map_df(.x= tisefka[,target_ts],.f = interp_na_value, mode = "spline")
target_ts <- c("date",target_ts)
tisefka <- tisefka[,target_ts]
tisefka
target_ts<-colnames(economics)[-1]
tisefka <- economics
tisefka[,target_ts] <- purrr::map_df(.x= tisefka[,target_ts],.f = interp_na_value, mode = "spline")
target_ts <- c("date",target_ts)
tisefka <- tisefka[,target_ts]
tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
target_ts<-colnames(economics)[-1]
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
tisefka <- purrr::map(.x = target_ts, ~anomaly_detection_yiwen(tisefka = tisefka[,c("date",.x)]))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
tisefka[[1]]
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
tisefka<-economics
tisefka[,target_ts] <- purrr::map_df(.x= tisefka[,target_ts],.f = interp_na_value, mode = "spline")
tisefka <- tisefka[,c("date",target_ts)]
tisefka <- purrr::map(.x = target_ts, ~anomaly_detection_yiwen(tisefka = tisefka[,c("date",.x)]))%>%
stats::setNames(target_ts)
tisefka$pce
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
anomaly_detection_nnegh <- function(tisefka = NULL, anomaly_mode = "auto", target_ts = NULL) {
tisefka[,target_ts] <- purrr::map_df(.x= tisefka[,target_ts],.f = interp_na_value, mode = "spline")
tisefka <- tisefka[,c("date",target_ts)]
tisefka <- purrr::map(.x = target_ts, ~anomaly_detection_yiwen(tisefka = tisefka[,c("date",.x)],anomaly_mode = anomaly_mode))%>%
stats::setNames(target_ts)
return(tisefka)
}
a <- anomaly_detection_nnegh(tisefka = economics_long,target_ts = "value")
target_ts
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
economics_long
economics_long$variable
unique(economics_long$variable)
a <- anomaly_detection_nnegh(tisefka = economics,target_ts = "pop")
tisefka <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
target_ts
tisefka <- economics
tisefka <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
report_output$tella_anomaly <- "Anomalies" %in% colnames(tisefka)
tisefka <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
tisefka$pce
tisefka
output_season
output_season <- output_season$pce
output_season
tes3a_ddurt
tuzya
ts_x%>%dplyr::mutate( paste0("Seaso_adju_",tuzya) = as.numeric(ts_temp))
ts_x
ts_temp
tes3a_ddurt <- seastests::isSeasonal(ts(ts_x, frequency = tuzya), test = "wo", freq = NA)
ts_temp <- forecast::seasadj(stats::stl(x = ts(ts_x, frequency = tuzya), s.window = 2, s.degree = 1))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
paste0("Seaso_adju_",tuzya)
ts_x%>%dplyr::mutate( paste0("Seaso_adju_",tuzya) = as.numeric(ts_temp))
ts_temp
ts_x%>%dplyr::mutate(paste0("Seaso_adju_",tuzya) = as.numeric(ts_temp))
ts_x
ts_x%>%dplyr::mutate(tuzya = as.numeric(ts_temp))
tuzya <- paste0("Seaso_adju_",tuzya)
ts_x <- ts_x%>%dplyr::mutate(!!tuzya = as.numeric(ts_temp))
ts_x <- ts_x%>%dplyr::mutate(vars(tuzya) = as.numeric(ts_temp))
?dplyr::mutate
ts_x <- ts_x%>%dplyr::mutate(tuzya =: as.numeric(ts_temp))
ts_x <- ts_x%>%dplyr::mutate(tuzya := as.numeric(ts_temp))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
tisefka <- economics
season_adjust_f(tisefka = tisefka[, target_ts], time_unit = time_unit)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
report_output<-list()
if (is.null(sdukkel)) {
report_output$seasonal_adjustement <- season_adjust_f(tisefka = tisefka[, target_ts], time_unit = time_unit)
}
if (nrow(tisefka) < 50000) anomaly_detection <- TRUE
if (anomaly_detection == TRUE & is.null(sdukkel)) {
report_output$anmaly_output <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
}
report_output$anmaly_output$uempmed
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
anmaly_output
anmaly_output <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$seasonal_adjustement[[.x]],anmaly_output[[.x]]) )
anmaly_output[[.x]][,-1]
purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$seasonal_adjustement[[.x]],anmaly_output[[.x]][,-1]) )
purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$seasonal_adjustement[[.x]][,-1],anmaly_output[[.x]]) )
season_adjust <- FALSE
if (is.null(sdukkel)) {
report_output$tisefka <- season_adjust_f(tisefka = tisefka[, target_ts], time_unit = time_unit)
}
if (nrow(tisefka) < 50000) anomaly_detection <- TRUE
if (anomaly_detection == TRUE & is.null(sdukkel)) {
anmaly_output <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
}
report_output$tisefka <-  purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$seasonal_adjustement[[.x]][,-1],anmaly_output[[.x]]) )
report_output$tisefka
report_output <- list()
report_output$tisefka <-  purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$seasonal_adjustement[[.x]][,-1],anmaly_output[[.x]]) )
report_output$time_unit <- time_unit
report_output$target_ts <- target_ts
report_output$aggregation_metric <- aggregation_metric
report_output_data
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "Sum",time_unit = "years",base_unit = "months",target_ts = c("pop"))
a$tisefka
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "Sum",time_unit = "years",base_unit = "months",target_ts = c("pop","unemp"))
colnames(economics)
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "Sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
a$tisefka
if (is.null(tisefka)) return(NULL)
tisefka <- economics
aggregation_metric<-"sum"
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
a$tisefka
aggregation_metric <-"Sum"
if (is.null(tisefka)) return(NULL)
report_output <- base::list()
#----------------------
if (is.null(sdukkel_ih)) {
sdukkel <- NULL
} else if (sdukkel_ih == FALSE) {
sdukkel <- NULL
}
if (time_unit == base_unit) aggregation_metric <- NULL
report_output_data <- data_aggregation_f(
tisefka = tisefka,
sdukkel = sdukkel,
time_unit = time_unit,
base_unit = base_unit, target_ts = target_ts
)
paste0("ts_aggregated_by_", tolower(aggregation_metric))
report_output_data[[paste0("ts_aggregated_by_", tolower(aggregation_metric))]]
tisefka <- report_output_data[[paste0("ts_aggregated_by_", tolower(aggregation_metric))]]
season_adjust <- FALSE
if (is.null(sdukkel)) {
report_output$tisefka <- season_adjust_f(tisefka = tisefka[, target_ts], time_unit = time_unit)
}
report_output$tisefka$pce
if (nrow(tisefka) < 50000) anomaly_detection <- TRUE
if (anomaly_detection == TRUE & is.null(sdukkel)) {
anomaly_output <- anomaly_detection_nnegh(tisefka = tisefka, anomaly_mode = "anomalize", target_ts = target_ts)
}
purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$seasonal_adjustement[[.x]][,-1],anomaly_output[[.x]])
)
report_output$seasonal_adjustement
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
a$tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
report_output$tisefka <- season_adjust_f(tisefka = tisefka[, target_ts], time_unit = time_unit)
#----------------------------------
report_output$tisefka <-  purrr::map(.x = names(report_output$seasonal_adjustement),~dplyr::bind_cols(report_output$tisefka[[.x]][,-1],anomaly_output[[.x]]) )
report_output$tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
a$tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
a$tisefka$pop
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/time_aggregator_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/missing_values_interpolation.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
a$tisefka$pop
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop"))
a$tisefka$pop
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop"))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/time_aggregator_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/missing_values_interpolation.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/anomaly_detection_module.R')
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop"))
a <- data_exloration_aqerru(tisefka = economics,aggregation_metric = "sum",time_unit = "years",base_unit = "months",target_ts = c("pop","pce"))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
season_adjust <- include_smoothing <- svegned_anomaly <- FALSE
length(ts_actions) > 0
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
tisefka<- a$tisefka
tisefka<- a$tisefka$pop
"Seaso_adju_"%in%colnames(tisefka)
colnames(tisefka)
"Anomalies"%in%colnames(tisefka)
"Anomalies"%in%colnames(tisefka)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
x_axis <- paste("Time in ", time_unit)
time_unit <-a$time_unit
graph_type<-"lines"
graph_type <- base::tolower(graph_type)
color_by
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
graph_fill <- bar_type <- graph_mode <- NULL
plot_settings<-NULL
graph_fill <- bar_type <- graph_mode <- NULL
if(is.null(plot_settings)){
RAW_col      <- "#00AFBB"
SA_col       <- "brown"
Anomaly_col  <- "orange"
}else{
RAW_col      <- plot_settings$colors_inu[1]
SA_col       <- plot_settings$colors_inu[2]
Anomaly_col  <- plot_settings$colors_inu[3]
}
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
graph_type
if (graph_type %in% c("markers")) {
graph_type <- "scatter"
graph_mode <- "markers"
RAW_col <- NULL
}
if (graph_type %in% c("lines", "lines+markers")) {
graph_mode <- graph_type
graph_type <- "scatter"
}
if (graph_type %in% c("filled")) {
graph_mode <- "lines"
graph_type <- "scatter"
graph_fill <- "tozeroy"
}
if (graph_type %in% c("bar1")) {
graph_type <- "bar"
bar_type <- NULL
}
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
target_variable<- "pop"
target_variable
tisefka
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
tisefka <- stats::density(tisefka[,target_variable, drop = T])
tisefka <- data.frame(date = tisefka$x, target_variable = tisefka$y)
graph_mode <- "lines"
graph_type <- "scatter"
graph_fill <- "tozeroy"
x_axis <- y_ax
y_ax <- "probability"
season_adjust <- include_smoothing <- svegned_anomaly <- FALSE
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
tisefka
tisefka
tisefka<-a$tisefka$pop
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
plotly::plot_ly(tisefka) %>%
plotly::add_trace(
x = ~date, y = ~!!target_variable, type = graph_type, mode = graph_mode, fill = graph_fill, name = y_ax, yaxis = "y",
line = base::list(color = RAW_col),
text = ~ paste(y_ax)
)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
plotly::plot_ly(tisefka) %>%
plotly::add_trace(
x = ~date, y = ~!target_variable, type = graph_type, mode = graph_mode, fill = graph_fill, name = y_ax, yaxis = "y",
line = base::list(color = RAW_col),
text = ~ paste(y_ax)
)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
plotly::plot_ly(tisefka) %>%
plotly::add_trace(
x = ~date, y = ~get(target_variable), type = graph_type, mode = graph_mode, fill = graph_fill, name = y_ax, yaxis = "y",
line = base::list(color = RAW_col),
text = ~ paste(y_ax)
)
target_variable
tisefka
graph_type
graph_mode
RAW_col
y_ax
x_axis <- paste("Time in ", time_unit)
plotly::plot_ly(tisefka) %>%
plotly::add_trace(
x = ~date, y = ~get(target_variable), type = graph_type, mode = graph_mode, fill = graph_fill, name = y_ax, yaxis = "y",
line = base::list(color = RAW_col),
text = ~ paste(y_ax)
)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
p
p <- plotly::plot_ly(tisefka) %>%
plotly::add_trace(
x = ~date, y = ~get(target_variable), type = graph_type, mode = graph_mode, fill = graph_fill, name = y_ax, yaxis = "y",
line = base::list(color = RAW_col),
text = ~ paste(y_ax)
) %>%
plotly::layout(
title = NULL,
xaxis = base::list(title = x_axis),
yaxis = base::list(title = y_ax, side = "left", showgrid = FALSE, zeroline = FALSE)
)
print(p)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
target_variable
xx <- 1:nrow(tisefka)
stats::loess(target_variable ~ xx, data = tisefka)
target_variable
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
tisefka%>%stats::loess(get(target_variable) ~ xx)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
stats::loess(!!target_variable ~ xx, data = tisefka)
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
?stats::loess
as.formula(paste0(target_variable," ~ xx"))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
xx <- 1:nrow(tisefka)
smoothing <- stats::loess(as.formula(paste0(target_variable," ~ xx")), data = tisefka)
smoothing
ll.df <- data.frame(
x = smoothing$x, fit = smoothing$fit,
lb = smoothing$fit - (1.96 * smoothing$s),
ub = smoothing$fit + (1.96 * smoothing$s)
)
p <- plotly::add_lines(p, x = ~date, y = smoothing.pred$fit, name = "Smoothing", line = base::list(color = "#E7B800", width = 2))
p <- plotly::add_ribbons(p,
x = ~date, ymin = ll.df$lb, ymax = ll.df$ub, name = "95% CI", line = base::list(opacity = 0.4, width = 0, color = "#E7B800"),
fillcolor = "rgba(7, 164, 181, 0.2)"
)
smoothing.pred <- predict(smoothing, se = TRUE)
ll.df <- data.frame(
x = smoothing$x, fit = smoothing$fit,
lb = smoothing$fit - (1.96 * smoothing$s),
ub = smoothing$fit + (1.96 * smoothing$s)
)
p <- plotly::add_lines(p, x = ~date, y = smoothing.pred$fit, name = "Smoothing", line = base::list(color = "#E7B800", width = 2))
p <- plotly::add_ribbons(p,
x = ~date, ymin = ll.df$lb, ymax = ll.df$ub, name = "95% CI", line = base::list(opacity = 0.4, width = 0, color = "#E7B800"),
fillcolor = "rgba(7, 164, 181, 0.2)"
)
p <- plotly::layout(p, y_axis = y_ax)
y_ax
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
b <- purrr::map(.x = names(a$tisefka),print("farid"))
names(a$tisefka)
b <- purrr::map(.x = names(a$tisefka),sekned_tisefka(tisefka = a$tisefka[[.x]],target_variable = .x,time_unit = a$time_unit,ts_actions = c("Anomaly")))
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
b <- purrr::map(.x = names(a$tisefka),sekned_tisefka(tisefka = a$tisefka[[.x]],target_variable = .x,time_unit = a$time_unit,ts_actions = c("Anomaly")))
b <- purrr::map(.x = names(a$tisefka),~sekned_tisefka(tisefka = a$tisefka[[.x]],target_variable = .x,time_unit = a$time_unit,ts_actions = c("Anomaly")))
b
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
source('~/Saldae_Analytics/SaldaePackages/SaldaeDataExplorer/R/data_exploratory_module.R')
b <- purrr::map(.x = names(a$tisefka),~sekned_tisefka(tisefka = a$tisefka[[.x]],target_variable = .x,time_unit = a$time_unit,ts_actions = c("Anomaly"),aggregation = a$aggregation_metric))
a
b
devtools::load_all(".")
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
library(SaldaeDataExplorer)
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
library(SaldaeDataExplorer)
devtools::load_all(".")
library(SaldaeDataExplorer)
devtools::load_all(".")
devtools::load_all(".")
library(SaldaeDataExplorer)
library(SaldaeDataExplorer)
